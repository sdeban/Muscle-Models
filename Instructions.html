<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <style>
    body {
      font-family: Verdana, Arial, sans-serif;
      text-align: center;
      align-content: center;
      margin: 0px;
      padding: 0px;
      line-height: 1.3em;
    }

    h1 {
      font-family: "Lucida Grande", Verdana, Arial, sans-serif;
      border-style: solid;
      border-width: 1px;
      background: linear-gradient(0deg, #fffbe1, #fffced);
      border-left-width: 0px;
      border-top-width: 0px;
      border-right-width: 0px;
      font-size: 3em;
      color: firebrick;
      text-align: center;
      margin: auto;
      padding-top: 10px;
      padding-bottom: 10px;
      margin-bottom: 10px;
      line-height: 1.6em;
    }

    h2 {
      color: royalblue;
      margin-bottom: 5px;
      margin-top: 5px;
      line-height: 1.6em;
    }

    h3 {
      color: darkgreen;
      margin-bottom: 5px;
      margin-top: auto;
      font-style: italic;
      line-height: 1.6em;
    }

    p {
      font-size: 100%;
      margin-top: 0px;
    }

    #main {
      max-width: 900px;
      margin: auto;
      padding-left: 20px;
      padding-right: 20px;
    }

    #footer {
      clear: both;
      padding: 10px;
      text-align: center;
      color: #cccccc;
    }

    #legend {
      font-size: 80%;
      font-style: italic;
    }

  </style>
  <title>Muscle Explorer Instructions</title>
  <h1> <em>Muscle Explorer</em></h1>
</head>

<body>
  <div id="main">
    <h2>Overview</h2>
    <p>
      <b>Muscle Explorer</b> simulates the performance of musculoskeletal systems in which a single muscle shortens against an elastic element in series with a mass. The model can be used to explore muscle-tendon behavior to predict results of in-vitro muscle experiments or the performance of an animal's explosive movement such as jumping or striking. The model simulates the interaction of several elements: a muscle-like actuator, a viscous damper, an inertial muscle mass, a hookean spring, a massless lever with a changing mechanical advantage, and an inertial projectile mass (Fig. 1).
      <br>
    </p>
    <p>Physiological and biomechanical parameters can be set and when the muscle actuator is activated it builds force and moves the inertial muscle mass, stretching the spring. Recoil of the spring rotates the lever and accelerates the projectile mass. The muscle actuator generates force using realistic force-velocity and force-length properties for skeletal muscle, and the physics are modeled in a forward dynamics fashion using a classical fourth-order Runge-Kutta integrator.</p>
    <img src="MuscleSpring.svg" alt="" style=" width: 100%;" vspace="10" align="top">
    <div id="legend"><em><b>Figure 1.</b> A pseudo-anatomical schematic of the model showing the relationships of the components.</em></div>
    <br>

    <h2>Components</h2>
    <h3>Muscle</h3>
    <p>All energy in the simulation comes from the muscle component, which consists of three subcomponents: muscle actuator, muscle mass and muscle damper. The <b>muscle actuator</b> is the most complex, producing force based on three conditions of the muscle: shortening velocity, length, and excitation level. Muscle shortening velocity determines absolute muscle force using a non-normalized force-velocity relation with specified Vmax, P0, and curvature (i.e. power ratio). The resulting force is multiplied by a value from 0 to 1 that is determined by the muscle length using a normalized force-length curve for frog limb muscle. This product is further multiplied by a value from 0 to 1 representing the level of muscle excitation, which increases sigmoidally from 0 at the start of the simulation to 1 over a specified duration. The acceleration of the inertial <b>muscle mass</b> is determined by the balance of forces acting on in, with the actuator applying force in one direction and the spring applying force in the opposite direction. The <b>muscle damper</b> opposes movement of the muscle mass with a force that is proportional to the velocity of muscle length change (i.e. velocity of muscle mass movement). The muscle is constrained to exert force only in tension (i.e., it can't push).</p>

    <h3>Tendon</h3>
    <p>The tendon component consists of a tension spring that links the muscle to the appendage and projectile. Movement of the muscle mass is linked to length changes in the <b>spring</b>, which lies between the muscle mass and the lever that is attached to the projectile. The spring is hookean and exerts force that is proportional to its length, a spring constant that can be specified. Like the muscle, it is constrained to exert force only in tension.</p>

    <h3>Appendage</h3>
    <p>The appendage component consists of a <b>lever</b> that links the tendon to the projectile. The lever is massless and has a variable mechanical advantage as it rotates. The range of mechanical advantage can be specified (as gear ratio) as can the duration over which it changes. A <b>latch</b> prevents the lever from rotating as the spring exerts force on the lever; it can be released at a specified time, after which the change in mechanical advantage occurs.</p>

    <h3>Projectile</h3>
    <p>The projectile component consists of an inertial <b>mass</b> that is accelerated by the lever. No other forces are acting on the projectile, such as gravitational or damping forces, although these could be added to the code.</p>

    <h2>Parameters</h2>
    <p>Working on this... Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

    <h3>Muscle P0</h3>
    <p>Not done yet. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

    <h2>Scenarios</h2>
    <p>The model can simulate a number of scenarios, such as a salamander shooting out its tongue or a frog launching its whole body into the air.</p>

    <h3>Salamander tongue projection</h3>
    <p>Large muscle, small projectile, etc.</p>

    <h3>Jumping frog</h3>
    <p>Small muscle, large projectile, etc.</p>

    <h2>Challenges</h2>
    <p>The model can be extended with some knowledge of JavaScript. In addition to this documentation, the code is thoroughly commented with the goal that the function of every line is clear, as well as the overall structure of the program. I am far from a professional programmer and I am sure I have committed a number of coding crimes, e.g. putting everything in one file, but hopefully the code is at least logical and understandable. Some ideas for extension are (1) saving and loading settings (I currently have no idea how to do this but it would be awesome for teaching); (2) wrapping the code in a set of loops to systematically change parameters and save the results; (3) adding more or different output graphs or files, or the production of nice figures; and (4) allowing parameters to be specified in different ways, for example elastic modulus instead of spring constant. The model and this documentation are on <a href="https://github.com/sdeban/Muscle-models" target="_blank">GitHub</a>.</p>

    <h2>Dependencies</h2>
    <p>The model is implemented in JavaScript, CSS and HTML and should run in most modern browsers. I know that it runs well on Chrome and on Safari mobile. On Safari desktop, however, it gets sluggish after applying settings several times and has to be reloaded to recover good performance. The only dependency is <a href="https://developers.google.com/chart/" target="_blank">Google Charts</a>.</p>

    <div id="footer">Muscle Explorer. 2017. Stephen M. Deban, Department of Integrative Biology, University of South Florida, Tampa. </div>
</body>

</html>
